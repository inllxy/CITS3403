<div class="bracket-wrap">
  {# 检查 comp 和 comp.bracket 是否存在 #}
  {% if comp and comp.bracket %}
    {% for round_idx, matches in comp.bracket.items() %}
      <div class="round round-{{ loop.index }}">
        <div class="sub-header">
          <div class="TournaType">Round {{ round_idx }}</div>
        </div>

        {# Loop over each match in this round #}
        {% for match in matches %}
          <div class="match">
            <div class="player match{{ loop.index }}-player1">
              <span class="score">{{ match.score1 or 0 }}</span>
              <span class="player_team">{{ match.team1 or 'Unknown' }}</span>
              <span>|</span>
              <span class="player_name">
                <a href="{{ url_for('player_page') }}" target="_parent">{{ match.player1 or 'Player 1' }}</a>
              </span>
              {% if match.flag1_url %}
                <img class="flag" src="{{ match.flag1_url }}" alt="Flag for {{ match.team1 }}">
              {% endif %}
            </div>

            <div class="player match{{ loop.index }}-player2">
              <span class="score">{{ match.score2 or 0 }}</span>
              <span class="player_team">{{ match.team2 or 'Unknown' }}</span>
              <span>|</span>
              <span class="player_name">
                <a href="{{ url_for('player_page') }}" target="_parent">{{ match.player2 or 'Player 2' }}</a>
              </span>
              {% if match.flag2_url %}
                <img class="flag" src="{{ match.flag2_url }}" alt="Flag for {{ match.team2 }}">
              {% endif %}
            </div>
          </div>
        {% endfor %}

      </div>
    {% endfor %}
  {% else %}
    <p class="text-muted">No bracket data available.</p>
  {% endif %}
</div>

