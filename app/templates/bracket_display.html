<div class="bracket-wrap">
  {# ===== Winner Bracket ===== #}
  {% if comp.bracket.winner %}
    <div class="bracket WinnerBracket">
      <div class="sub-header">
        <div class="TournaType">Winner Bracket</div>
      </div>

      {# 循环 winner 对阵，每个 round_idx 对应一个小组 #}
      {% for round_idx, matches in comp.bracket.winner.items() %}
        <div class="round round-{{ round_idx }}-winner">
          <div class="sub-header">
            <div class="TournaType">Round {{ round_idx }}</div>
          </div>

          {# 循环这一轮里的每一场 match #}
          {% for match in matches %}
            <div class="match">
              <div class="player match{{ loop.index }}-player1">
                <span class="score">{{ match.score1 }}</span>
                <span class="player_team">{{ match.team1 }}</span>
                <span>|</span>
                <span class="player_name">{{ match.player1 }}</span>
                {% if match.flag1_url %}
                  <img class="flag" src="{{ match.flag1_url }}" alt="Flag for {{ match.team1 }}">
                {% endif %}
              </div>
              <div class="player match{{ loop.index }}-player2">
                <span class="score">{{ match.score2 }}</span>
                <span class="player_team">{{ match.team2 }}</span>
                <span>|</span>
                <span class="player_name">{{ match.player2 }}</span>
                {% if match.flag2_url %}
                  <img class="flag" src="{{ match.flag2_url }}" alt="Flag for {{ match.team2 }}">
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {# ===== Loser Bracket ===== #}
  {% if comp.bracket.loser %}
    <div class="bracket LoserBracket">
      <div class="sub-header">
        <div class="TournaType">Loser Bracket</div>
      </div>

      {# 循环 loser 对阵，每个 round_idx 对应一个小组 #}
      {% for round_idx, matches in comp.bracket.loser.items() %}
        <div class="round round-{{ round_idx }}-loser">
          <div class="sub-header">
            <div class="TournaType">Round {{ round_idx }}</div>
          </div>

          {% for match in matches %}
            <div class="match">
              <div class="player match{{ loop.index }}-player1">
                <span class="score">{{ match.score1 }}</span>
                <span class="player_team">{{ match.team1 }}</span>
                <span>|</span>
                <span class="player_name">{{ match.player1 }}</span>
                {% if match.flag1_url %}
                  <img class="flag" src="{{ match.flag1_url }}" alt="Flag for {{ match.team1 }}">
                {% endif %}
              </div>
              <div class="player match{{ loop.index }}-player2">
                <span class="score">{{ match.score2 }}</span>
                <span class="player_team">{{ match.team2 }}</span>
                <span>|</span>
                <span class="player_name">{{ match.player2 }}</span>
                {% if match.flag2_url %}
                  <img class="flag" src="{{ match.flag2_url }}" alt="Flag for {{ match.team2 }}">
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      {% endfor %}
    </div>
  {% endif %}

</div>

